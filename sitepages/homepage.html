<!DOCTYPE html>
<html style="background-color:#f7f7f7;">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script scr=jquery.js></script>
	<title>Compendium Theologicae Veritatis</title>
</head>
<body onresize="resize_page()" style="min-width:600px">
	<div style="height:42pt">
		<input style="position:absolute;top:16pt;left:20pt;width:40pt" onclick="pop_up()" type="image" src="menu.gif">
		<input id="toggle" style="position:absolute;left:80pt;top:15pt;width:40pt" onclick="toggle()" type="image" src="left.gif">
		<img style="max-height:48pt;max-width:400pt;position:absolute;top:0pt;left:32.5%;width:35%;" type="image" src="title.gif">
		<form style="position:absolute;text-align:right;top:16pt;left:50%;width:48%" action="search_page.php">
			<input style="width:20%" type="text" name="Search" placeholder="Search">
			<input style="float:right;width:15pt;position:relative;top:0pt;left:5pt" onclick="goToPage()" type="image" src="search2.gif">
		</form>
	</div>
	<style>
	iconMenu {
		position:absolute;
		z-index:2;
		left:20pt;
		top:32pt;
		height:75%;
		width:75%;
		line-height:30px;
		background-color:#eeeeee;
		border:1px solid black;
		border-radius: 3pt;
		overflow:auto;
		padding:1%;
		visibility:hidden;
	}
	viewLeft {
		line-height:30px;
		background-color:#e3e3e3;
		width:47.5%;
		float:left;
		border:1px solid #e3e3e3;
		border-radius: 2pt;
		box-shadow: 0 0 1px 1px #888;
		padding:1%;
	}
	viewRight {
		line-height:30px;
		background-color:#e3e3e3;
		height:80%;
		width:47.5%;
		float:right;
		border:1px solid #e3e3e3;
		border-radius: 2pt;
		box-shadow: 0 0 1px 1px #888;
		padding:1%;
	}
	viewImage {
		line-height:30px;
		height:94.5%;
		width:100%;
		float:left;
		left:2.5%;
		box-shadow: 0 0 1px 1px #888;
		overflow:auto;
	}
	iframe{
		border:hidden;
	}
	.rollovericons input{
		margin: 2pt;
	}
	</style>  
	<iconMenu id="menu">
		<img id="icon" alt="001" onclick="open("001")" src="../icons/001.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;"></img>
		<img id="icon" alt="002" onclick="open()" src="../icons/002.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:5px;"></img>
		<img id="icon" alt="003" onclick="open()" src="../icons/003.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:10px;"></img>
		<img id="icon" alt="004" onclick="open()" src="../icons/004.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:15px;"></img>
		<img id="icon" alt="005" onclick="open()" src="../icons/005.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:20px;"></img>
		<img id="icon" alt="006" onclick="open()" src="../icons/006.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:25px;"></img>
		<img id="icon" alt="001" onclick="open()" src="../icons/001.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;"></img>
		<img id="icon" alt="002" onclick="open()" src="../icons/002.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:5px;"></img>
		<img id="icon" alt="003" onclick="open()" src="../icons/003.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:10px;"></img>
		<img id="icon" alt="004" onclick="open()" src="../icons/004.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:15px;"></img>
		<img id="icon" alt="005" onclick="open()" src="../icons/005.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:20px;"></img>
		<img id="icon" alt="006" onclick="open()" src="../icons/006.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:25px;"></img>
		<img id="icon" alt="001" onclick="open()" src="../icons/001.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;"></img>
		<img id="icon" alt="002" onclick="open()" src="../icons/002.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:5px;"></img>
		<img id="icon" alt="003" onclick="open()" src="../icons/003.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:10px;"></img>
		<img id="icon" alt="004" onclick="open()" src="../icons/004.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:15px;"></img>
		<img id="icon" alt="005" onclick="open()" src="../icons/005.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:20px;"></img>
		<img id="icon" alt="006" onclick="open()" src="../icons/006.jpg" style="width:16%;box-shadow: 0 0 1px 1px #666;position:relative;left:25px;"></img>
	</iconMenu>
	<viewLeft id="left">
		<div class="rollovericons" id="buttonsL">
			<input style="float:left;width:15pt;position:relative;left:45%;" onclick="prevImage()" type="image" src="prev3.gif">
			<input style="float:left;width:15pt;position:relative;left:46%;" onclick="nextImage()" type="image" src="next3.gif">
			<input style="float:left;width:15pt;position:absolute;left:15pt;" type="image" onclick="zoomOut()" src="zoomOut.gif" alt="Submit">
			<input style="float:left;width:12pt;position:absolute;left:35pt" type="image" onclick="zoomDef()" src="zoom100.gif" alt="Submit">
			<input style="float:left;width:15pt;position:absolute;left:51.5pt" type="image" onclick="zoomIn()" src="zoomIn.gif" alt="Submit">
			<input style="float:right;position:relative;top:1pt;left:1pt" onclick="goToNum(document.getElementById('pagen_l').value)" type="Submit" value="Go">
			<input style="float:right;width:20pt" type="text" id="pagen_l" name="Search" onkeydown="if (event.keyCode == 13) goToNum(document.getElementById('pagen_l').value)" placeholder="page">
		</div>
		<br>
		<viewImage id="image">
			<img id="page" alt="001" src="../img/001.jpg" style="width:100%;box-shadow: 0 0 1px 1px #666;"></img>
		</viewImage>
	</viewLeft>
	<viewRight id="right">
		<div>
			<div>
			<div class="rollovericons" id="buttonsR">
				<input id="modify" style="float:left;position:relative;width:10%;" onclick="edit()" type="submit" value="Edit">
				<input id="load" style="float:left;position:relative;width:10%;" onclick="cow()" type="submit" value="Load">				
				<input style="float:left;position:relative;left:36%;width:15pt" onclick="prevImage()" type="image" src="prev3.gif">
				<input style="float:left;position:relative;left:37%;width:15pt" onclick="nextImage()" type="image" src="next3.gif">
				<input style="float:right;position:relative;top:1pt;left:1pt" onclick="goToNum(document.getElementById('pagen_r').value)" type="Submit" value="Go">
				<input style="float:right;width:20pt" type="text" id="pagen_r" name="Search" onkeydown="if (event.keyCode == 13) goToNum(document.getElementById('pagen_r').value)" placeholder="page">
			</div>
			<br>
			<div id="textButtons">
				<input style="text-align:center;width:32%" onclick="toTranscription()" type="Submit" value="Transcription">
				<input style="text-align:center;width:32%" onclick="toTranslation()" type="Submit" value="Translation">
				<input style="text-align:center;width:32%" onclick="toNotes()" type="Submit" value="Notes">
			</div>
		</div>
		<iframe id="textView" style="font-family:arial" src="transcription/trsc_001.txt" width="100%"></iframe>
		<textarea id="editMode" style="resize:none;position:absolute;top:0pt;visibility:hidden"></textarea>
	</viewRight>
	<script>
		function cow(){
			$(".editMode").load(document.getElementById("textView").src);
			alert("i am a cow");
		}
		/**$(document).ready(function() {
		   $("#load").click(function() {
			   /**ajax({
				   url : transcription/trsc_001.txt//document.getElementById("textView").src,
				   dataType: "text",
				   success : function (data) {
					   $("#editMode").text(data);
				   }
				   
			   });
			   alert("bob, for all i care");
		   });
		});**/ 
	</script>
	<script>
	function UrlExists(url)
	{
		var http = new XMLHttpRequest();
		http.open('HEAD', url, false);
		http.send();
		return http.status!=404;
	}
	function fileExists(url) {
		if(url){
			var req = new XMLHttpRequest();
			req.open('GET', url, false);
			req.send();
			return req.status==200;
		}
		else {
			return false;
		}
	}
	var visible = 0;
	
	function edit(){
		if(document.getElementById("modify").value=="Save"){
			document.getElementById("modify").value="Edit";
			document.getElementById("textView").style.width="100%";
			document.getElementById("editMode").style.height="0%";
			document.getElementById("editMode").style.width="0%";
			document.getElementById("editMode").style.visibility="hidden";
			document.getElementById("editMode").style.position="absolute";
			visible = 0;
			//this is where we have to implement php stuff. That's for later.
			//bummer.
		}
		else if(document.getElementById("modify").value=="Edit"){
			document.getElementById("modify").value="Save";
			document.getElementById("textView").style.width="0%";
			document.getElementById("editMode").style.position="relative";
			document.getElementById("editMode").style.width="95%";
			document.getElementById("editMode").style.height=document.getElementById("textView").style.height;
			document.getElementById("editMode").style.visibility="visible";	
			visible = 1;
			
			var client = new XMLHttpRequest();
			client.open('GET', document.getElementById("textView").src);
			client.onreadystatechange = function() {
			  //alert(client.responseText);
			  document.getElementById("editMode").value=client.responseText;
			}
			client.send();
			//var text = document.getElementById("textView").src;
			//document.getElementById("editMode").value=client;
		}
		
		
	}
	function resize_page(){
		document.getElementById("left").style.height = String(window.innerHeight-100) + "px";
		document.getElementById("right").style.height = String(window.innerHeight-100) + "px";
		if(document.getElementById("textView").style.height!="0%"){
			document.getElementById("textView").style.height = String(window.innerHeight-160) + "px";
			document.getElementById("editMode").style.height=document.getElementById("textView").style.height;			
		}
	}
	resize_page();
	var widthF = document.getElementById("image").style.width;
	var widthI = document.getElementById("textView").style.height;
	var widthE = document.getElementById("editMode").style.height;
	
	function toggle(){
		var full = "94%";
		var half = "47.5%";
		var none = "1%";
		
		if(document.getElementById("left").style.width == full){
			document.getElementById("toggle").src = "left.gif";
			document.getElementById("left").style.width = half;
			document.getElementById("right").style.width = half;
			document.getElementById("image").style.width=widthF;
			document.getElementById("textView").style.height=widthI;
			document.getElementById("editMode").style.height=widthE;
			document.getElementById("image").style.visibility = "visible";
			document.getElementById("buttonsL").style.visibility = "visible";
			document.getElementById("buttonsR").style.visibility = "visible";
			document.getElementById("textButtons").style.visibility = "visible";
			document.getElementById("textView").style.visibility = "visible";
			if(visible == 1){
				document.getElementById("editMode").style.visibility = "visible";
			}
		}
		else if(document.getElementById("right").style.width == full){
			document.getElementById("toggle").src = "mid.gif";
			document.getElementById("left").style.width = full;
			document.getElementById("right").style.width = none;
			document.getElementById("image").style.width=widthF;
			document.getElementById("textView").style.height="0%";
			document.getElementById("editMode").style.height="0%";
			document.getElementById("image").style.visibility = "visible";
			document.getElementById("buttonsL").style.visibility = "visible";
			document.getElementById("buttonsR").style.visibility = "hidden";
			document.getElementById("textButtons").style.visibility = "hidden";
			document.getElementById("textView").style.visibility = "hidden";
			document.getElementById("editMode").style.visibility = "hidden";
		}
		else{
			document.getElementById("toggle").src = "right.gif";
			document.getElementById("right").style.width = full;
			document.getElementById("left").style.width = none;
			widthF=document.getElementById("image").style.width;
			document.getElementById("image").style.width = "0%";
			document.getElementById("textView").style.height=widthI;
			document.getElementById("editMode").style.height=widthE;
			document.getElementById("image").style.visibility = "hidden";
			document.getElementById("buttonsL").style.visibility = "hidden";
			document.getElementById("buttonsR").style.visibility = "visible";
			document.getElementById("textButtons").style.visibility = "visible";
			document.getElementById("textView").style.visibility = "visible";
			if(visibile == 1){
				document.getElementById("editMode").style.visibility = "visible";
			}
		}
		resize_page();
	}
	function pop_up(){
		if(document.getElementById("menu").style.visibility == "hidden"){
			document.getElementById("menu").style.visibility = "visible";
		}
		else{
			document.getElementById("menu").style.visibility = "hidden";
		}
	}
	pop_up();
	function nextImage() {
		//store the element in var image
		var image = document.getElementById('page');
		//get directory and extension of files
		var dir="../img/";
		var ext=".jpg";
      
		//imgdata is the alt text. We set that.
		var imgData=image.alt;
		var position=parseFloat(imgData);
		var mid=""+position;
		//add the padding zeroes to mid part 1
		while(mid.length<3)mid="0"+mid;
		var position2=position+1;
		var mid2=""+position2;
		//add the padding zeroes to mid part 2
		while(mid2.length<3)mid2="0"+mid2;
      
		if (image.src.match(String(dir+mid+ext))) {
			image.src = String(dir+mid2+ext);
			image.alt = mid2;
			nextText();
			zoomDef();
			//image=document.getElementByID('page');
		} else {
			image.src = String(dir+mid+ext);
		}
	}
	function prevImage() {
		//store the element in var image
		var image = document.getElementById('page');
		//get directory and extension of files
		var dir="../img/";
		var ext=".jpg";
      
		//imgdata is the alt text. We set that.
		var imgData=image.alt;
		var position=parseFloat(imgData);
		var mid=""+position;
		//add the padding zeroes to mid part 1
		while(mid.length<3)mid="0"+mid;
		var position2=position-1;
		var mid2=""+position2;
		//add the padding zeroes to mid part 2
		while(mid2.length<3)mid2="0"+mid2;
      
		if (image.src.match(String(dir+mid+ext))&&position2>=0) {
			image.src = String(dir+mid2+ext);
			image.alt = mid2;
			nextText();
			zoomDef();
			//image=document.getElementByID('page');
		} else {
			image.src = String(dir+mid+ext);
		}
	}
	function toTranscription(){
		var image=document.getElementById('page');
		var dir="transcription/trsc_";
		var ext=".txt";
		//get the image's alt text which is the "page number" we want
		var imgData=image.alt;
		//parse a float to remove padding zeroes
		var position=parseFloat(imgData);
		//make a string
		var mid=""+position;
		//add the padding zeroes to mid
		while(mid.length<3)mid="0"+mid;
		var textView=document.getElementById('textView');
		var txtSrc=textView.src;
		var item=String(dir+mid+ext);
		textView.setAttribute('src',item);
	}
	function toTranslation(){
		var image=document.getElementById('page');
		var dir="translation/trns_";
		var ext=".txt";
		//get the image's alt text which is the "page number" we want
		var imgData=image.alt;
		//parse a float to remove padding zeroes
		var position=parseFloat(imgData);
		//make a string
		var mid=""+position;
		//add the padding zeroes to mid
		while(mid.length<3)mid="0"+mid;
		var textView=document.getElementById('textView');
		var txtSrc=textView.src;
		var item=String(dir+mid+ext);
		textView.setAttribute('src',item);
	}
	function toNotes(){
		var image=document.getElementById('page');
		var dir="note/note_";
		var ext=".txt";
		//get the image's alt text which is the "page number" we want
		var imgData=image.alt;
		//parse a float to remove padding zeroes
		var position=parseFloat(imgData);
		//make a string
		var mid=""+position;
		//add the padding zeroes to mid
		while(mid.length<3)mid="0"+mid;
		var textView=document.getElementById('textView');
		var txtSrc=textView.src;
		var item=String(dir+mid+ext);
		textView.setAttribute('src',item);
	}
	function nextText(){
		var frame=document.getElementById('textView');
		var tsrc=frame.src;
		var note=tsrc.search("note");
		var trsc=tsrc.search("trsc");
		var trns=tsrc.search("trns");
		if(note>0){
			toNotes();
		}
		else if(trsc>0){
			toTranscription();
		}
		else if(trns>0){
			toTranslation();
		}
	}
    
	//DEPRECIATED FUNCTION
	//DO NOT USE
	//Use "goToNum(arg)" instead.
	function goToPage(){
		var image=document.getElementById('page');
		var text=document.getElementById('pagen_l');
		var dir="../img/";
		var ext=".jpg";
		var data=String(text.value);
		if(!(parseFloat(data)<0)&&!(parseFloat(data)>900)){
			while(data.length<3)data="0"+data;
			image.src=String(dir+data+ext);
			image.alt=data;
			nextText();
			zoomDef();
		}
	}
	
	//HIGHLY ADAPTED from goToPage()
	//expects "num" to be a string with just the page number.
	//	typically: document.getElementById('pagen_l').value
	//	or id='pagen_r'.
	function goToNum(num){
		var image=document.getElementById('page');
		var dir="../img/";
		var ext=".jpg";
		var data=String(num);
		if(!(parseFloat(data)<0)&&!(parseFloat(data)>900)){
			while(data.length<3)data="0"+data;
			image.src=String(dir+data+ext);
			image.alt=data;
			nextText();
			zoomDef();
			document.getElementById('pagen_l').value="";
			document.getElementById('pagen_r').value="";
		}
	}
    
	function zoomIn(){
		var image=document.getElementById('page');
		var imgStyle=image.style;
		var width=imgStyle["width"];
		var num=parseFloat(width.substring(0,width.indexOf("%")))+10;
		if(num<1001){
			imgStyle["width"]=num+"%";
		}
	}
	function zoomOut(){
		var image=document.getElementById('page');
		var imgStyle=image.style;
		var width=imgStyle["width"];
		var num=parseFloat(width.substring(0,width.indexOf("%")))-10;
		if(num>39){
			imgStyle["width"]=num+"%";
		}
	}
	function zoomDef(){
		var image=document.getElementById('page');
		var imgStyle=image.style;
		imgStyle["width"]="100%";
	}
	</script>
</body>
</html>