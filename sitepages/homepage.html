<!DOCTYPE html>
<html style="background-color:#e7e7e7">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Compendium Theologica Veritatis</title>
</head>
<body onresize="resize_page()">
	<div style="height:10%">
		<form action="chapter_select.php" method="post">
			<select style="position:absolute;top:15pt;left:2%;width:10%">
				<option value="ThisShouldNotBeDone" disabled selected = "selected">
					Select Chapter
				</option>
				<option value="heading1" disabled> Heading 1</option>
				<option value="Chapter 1">Chapter 1</option>
				<option value="Chapter 2">Chapter 2</option>
				<option value="heading1" disabled> Heading 2</option>
				<option value="Chapter 3">Chapter 3</option>
				<option value="Chapter 4">Chapter 4</option>
			</select>
		</form>
		<form style="position:absolute;text-align:right;top:15pt;left:50%;width:48%" action="search_page.php">
			<input style="width:20%" type="text" name="Search" placeholder="Search">
			<input type="submit" value="?">
			
		</form>
		<input style="position:absolute;left:14%" onclick="toggle()" type="Submit" value="Switch">
		<h3 style="position:relative;top:-2pt; color:#000000; text-align:top; width:10%; left:20%; width:60%; text-align:center;">
			COMPENDIUM THEOLOGICA VERITATIS
		</h3>
	</div>
	<style>
	viewLeft {
		line-height:30px;
		background-color:#c3c3cf;
		width:47.5%;
		float:left;
		border:1px solid #c3c3cf;
		border-radius: 2pt;
		box-shadow: 0 0 1px 1px #888;
		padding:1%;
	}
	viewRight {
		line-height:30px;
		background-color:#c3c3cf;
		height:80%;
		width:47.5%;
		float:right;
		border:1px solid #c3c3cf;
		border-radius: 2pt;
		box-shadow: 0 0 1px 1px #888;
		padding:1%;
	}
	viewImage {
		line-height:30px;
		height:95%;
		width:100%;
		float:left;
		left:2.5%;
		box-shadow: 0 0 1px 1px #888;
		overflow:auto;
	}
	iframe{
		border:hidden;
	}
	.rollovericons input{
		margin: 2pt;
	}
	</style>    
	<viewLeft id="left">
		<div class="rollovericons" id="buttonsL">
			<input style="float:left;width:15pt" onclick="prevImage()" type="image" src="prev3.gif">
			<input style="float:left;width:15pt" onclick="nextImage()" type="image" src="next3.gif">
			<input style="float:left;width:15pt" type="image" onclick="zoomOut()" src="zoomOut.gif" alt="Submit">
			<input style="float:left;width:12pt" type="image" onclick="zoomDef()" src="zoom100.gif" alt="Submit">
			<input style="float:left;width:15pt" type="image" onclick="zoomIn()" src="zoomIn.gif" alt="Submit">
			<input style="float:right;text-align:center" onclick="goToPage()" type="Submit" value="Go">
			<input style="float:right;width:10%" type="text" id="pagen" name="Search" onkeydown="if (event.keyCode == 13) goToPage()" placeholder="page#">
		</div>
		<br>
		<viewImage id="image">
			<img id="page" alt="001" src="../img/001.jpg" style="width:100%;box-shadow: 0 0 1px 1px #666;"></img>
		</viewImage>
	</viewLeft>
	<viewRight id="right">
		<div>
			<div>
			<div class="rollovericons" id="buttonsR">
				<input style="float:left;width:15pt" onclick="prevImage()" type="image" src="prev3.gif">
				<input style="float:left;width:15pt" onclick="nextImage()" type="image" src="next3.gif">
				<input style="float:right;text-align:center" onclick="goToPage()" type="Submit" value="Go">
				<input style="float:right;width:9%" type="text" id="pagen" name="Search" onkeydown="if (event.keyCode == 13) goToPage()" placeholder="page#">
			</div>
			<br>
			<div id="textButtons">
				<input style="text-align:center;width:32%" onclick="toTranscription()" type="Submit" value="Transcription">
				<input style="text-align:center;width:32%" onclick="toTranslation()" type="Submit" value="Translation">
				<input style="text-align:center;width:32%" onclick="toNotes()" type="Submit" value="Notes">
			</div>
		</div>
		<iframe id="textView" style="font-family:arial" src="transcription/trsc_001.txt" width="100%"></iframe>
	</viewRight>
	<script>
	function UrlExists(url)
	{
		var http = new XMLHttpRequest();
		http.open('HEAD', url, false);
		http.send();
		return http.status!=404;
	}
	function fileExists(url) {
		if(url){
			var req = new XMLHttpRequest();
			req.open('GET', url, false);
			req.send();
			return req.status==200;
		}
		else {
			return false;
		}
	}
	var widthF = document.getElementById("image").style.width;
	var widthI = document.getElementById("textView").style.height;
	function toggle(){
		var full = "94%";
		var half = "47.5%";
		var none = "1%";
		
		if(document.getElementById("left").style.width == full){
			document.getElementById("left").style.width = half;
			document.getElementById("right").style.width = half;
			document.getElementById("image").style.width=widthF;
			document.getElementById("textView").style.height=widthI;
			document.getElementById("image").style.visibility = "visible";
			document.getElementById("buttonsL").style.visibility = "visible";
			document.getElementById("buttonsR").style.visibility = "visible";
			document.getElementById("textButtons").style.visibility = "visible";
			document.getElementById("textView").style.visibility = "visible";
		}
		else if(document.getElementById("right").style.width == full){
			document.getElementById("left").style.width = full;
			document.getElementById("right").style.width = none;
			document.getElementById("image").style.width=widthF;
			document.getElementById("textView").style.height="0%";
			document.getElementById("image").style.visibility = "visible";
			document.getElementById("buttonsL").style.visibility = "visible";
			document.getElementById("buttonsR").style.visibility = "hidden";
			document.getElementById("textButtons").style.visibility = "hidden";
			document.getElementById("textView").style.visibility = "hidden";
		}
		else{
			document.getElementById("right").style.width = full;
			document.getElementById("left").style.width = none;
			widthF=document.getElementById("image").style.width;
			document.getElementById("image").style.width = "0%";
			document.getElementById("textView").style.height=widthI;
			document.getElementById("image").style.visibility = "hidden";
			document.getElementById("buttonsL").style.visibility = "hidden";
			document.getElementById("buttonsR").style.visibility = "visible";
			document.getElementById("textButtons").style.visibility = "visible";
			document.getElementById("textView").style.visibility = "visible";
		}
		resize_page();
	}
	function resize_page(){
		document.getElementById("left").style.height = String(window.innerHeight-95) + "px";
		document.getElementById("right").style.height = String(window.innerHeight-95) + "px";
		if(document.getElementById("textView").style.height!="0%"){
			document.getElementById("textView").style.height = String(window.innerHeight-150) + "px";
		}
	}
	resize_page();
	function nextImage() {
		//store the element in var image
		var image = document.getElementById('page');
		//get directory and extension of files
		var dir="../img/";
		var ext=".jpg";
      
		//imgdata is the alt text. We set that.
		var imgData=image.alt;
		var position=parseFloat(imgData);
		var mid=""+position;
		//add the padding zeroes to mid part 1
		while(mid.length<3)mid="0"+mid;
		var position2=position+1;
		var mid2=""+position2;
		//add the padding zeroes to mid part 2
		while(mid2.length<3)mid2="0"+mid2;
      
		if (image.src.match(String(dir+mid+ext))) {
			image.src = String(dir+mid2+ext);
			image.alt = mid2;
			nextText();
			zoomDef();
			//image=document.getElementByID('page');
		} else {
			image.src = String(dir+mid+ext);
		}
	}
	function prevImage() {
		//store the element in var image
		var image = document.getElementById('page');
		//get directory and extension of files
		var dir="../img/";
		var ext=".jpg";
      
		//imgdata is the alt text. We set that.
		var imgData=image.alt;
		var position=parseFloat(imgData);
		var mid=""+position;
		//add the padding zeroes to mid part 1
		while(mid.length<3)mid="0"+mid;
		var position2=position-1;
		var mid2=""+position2;
		//add the padding zeroes to mid part 2
		while(mid2.length<3)mid2="0"+mid2;
      
		if (image.src.match(String(dir+mid+ext))&&position2>=0) {
			image.src = String(dir+mid2+ext);
			image.alt = mid2;
			nextText();
			zoomDef();
			//image=document.getElementByID('page');
		} else {
			image.src = String(dir+mid+ext);
		}
	}
	function toTranscription(){
		var image=document.getElementById('page');
		var dir="transcription/trsc_";
		var ext=".txt";
		//get the image's alt text which is the "page number" we want
		var imgData=image.alt;
		//parse a float to remove padding zeroes
		var position=parseFloat(imgData);
		//make a string
		var mid=""+position;
		//add the padding zeroes to mid
		while(mid.length<3)mid="0"+mid;
		var textView=document.getElementById('textView');
		var txtSrc=textView.src;
		var item=String(dir+mid+ext);
		textView.setAttribute('src',item);
	}
	function toTranslation(){
		var image=document.getElementById('page');
		var dir="translation/trns_";
		var ext=".txt";
		//get the image's alt text which is the "page number" we want
		var imgData=image.alt;
		//parse a float to remove padding zeroes
		var position=parseFloat(imgData);
		//make a string
		var mid=""+position;
		//add the padding zeroes to mid
		while(mid.length<3)mid="0"+mid;
		var textView=document.getElementById('textView');
		var txtSrc=textView.src;
		var item=String(dir+mid+ext);
		textView.setAttribute('src',item);
	}
	function toNotes(){
		var image=document.getElementById('page');
		var dir="note/note_";
		var ext=".txt";
		//get the image's alt text which is the "page number" we want
		var imgData=image.alt;
		//parse a float to remove padding zeroes
		var position=parseFloat(imgData);
		//make a string
		var mid=""+position;
		//add the padding zeroes to mid
		while(mid.length<3)mid="0"+mid;
		var textView=document.getElementById('textView');
		var txtSrc=textView.src;
		var item=String(dir+mid+ext);
		textView.setAttribute('src',item);
	}
	function nextText(){
		var frame=document.getElementById('textView');
		var tsrc=frame.src;
		var note=tsrc.search("note");
		var trsc=tsrc.search("trsc");
		var trns=tsrc.search("trns");
		if(note>0){
			toNotes();
		}
		else if(trsc>0){
			toTranscription();
		}
		else if(trns>0){
			toTranslation();
		}
	}
    
	function goToPage(){
		var image=document.getElementById('page');
		var text=document.getElementById('pagen');
		var dir="../img/";
		var ext=".jpg";
		var data=String(text.value);
		if(!(parseFloat(data)<0)&&!(parseFloat(data)>900)){
			while(data.length<3)data="0"+data;
			image.src=String(dir+data+ext);
			image.alt=data;
			nextText();
			zoomDef();
		}
	}
    
	function zoomIn(){
		var image=document.getElementById('page');
		var imgStyle=image.style;
		var width=imgStyle["width"];
		var num=parseFloat(width.substring(0,width.indexOf("%")))+10;
		if(num<1001){
			imgStyle["width"]=num+"%";
		}
	}
	function zoomOut(){
		var image=document.getElementById('page');
		var imgStyle=image.style;
		var width=imgStyle["width"];
		var num=parseFloat(width.substring(0,width.indexOf("%")))-10;
		if(num>39){
			imgStyle["width"]=num+"%";
		}
	}
	function zoomDef(){
		var image=document.getElementById('page');
		var imgStyle=image.style;
		imgStyle["width"]="100%";
	}
	</script>
</body>
</html>